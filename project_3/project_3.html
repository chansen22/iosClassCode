<!DOCTYPE html>
<!-- saved from url=(0059)http://www.ecst.csuchico.edu/~chmorris/csci567/projects/03/ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <title>ChartToppers</title>
  
  <link rel="stylesheet" type="text/css" href="./project_3_files/reset-min.css">    
  <link rel="stylesheet" type="text/css" href="./project_3_files/default.css">    
  <link rel="stylesheet" type="text/css" href="./project_3_files/project.css">
<style type="text/css"></style></head>
<body class=" hasGoogleVoiceExt">

  <div id="content-area">
    <h1><span id="course-number">Project 3</span><span id="course-name">ChartToppers</span></h1>
  
    <div id="due">
      <h2>Due Date</h2>
      <p>
        Friday, March 29, 2013 by 11:59pm
      </p>
    </div>

    <h2 id="objectives">Objectives</h2>
<ul>
  <li>Continued experience with MVC</li>
  <li>Gain experience working with a <code>UINavigationController</code></li>
  <li>Gain experience working with a <code>UITableViewController</code></li>
  <li>Gain experience working with the <code>UITableViewDataSource</code> and <code>UITableViewDelegate</code></li>
  <li>Gain experience working with a web service</li>
  <li>Gain experience working with JSON</li>
  <li>Build a functional application from start to finish</li>
</ul>

<h2 id="description">Description</h2>
<p>In this assignment, you will build an iPhone application that will give a list and
details about the media items that are at the top of the iTunes charts in a given
category.  The application will bring the user to the iTunes store if he is interested 
in purchasing the item.  In addition, the user can share the item with a friend via 
Email, Messages, Twitter, Facebook, etc.</p>

<p>The data presented in this application will always be current as it will be pulled
from a remote web service provided by Apple.</p>

<p>A video demo of a working app can be found here:</p>

<p><a href="http://www.ecst.csuchico.edu/~chmorris/csci567/projects/03/chart_toppers.mov">Video Demo</a></p>

<p>Some things to note in the video:</p>

<ul>
  <li>Sharing via most services in the simulator do not work as they are not set up.</li>
  <li>Opening the item in the iTunes store does not work, as the stores do not exist
in the simulator.</li>
</ul>

<h2 id="the-data">The Data</h2>

<h3 id="the-source">The Source</h3>
<p>You will pull all of your data from a URL that is generated from the following location:</p>

<p><a href="http://itunes.apple.com/rss">http://itunes.apple.com/rss</a></p>

<p>You can choose any charts you would like, but you must have at least 6 charts, and span at
least 6 different media types.  You are welcome to have more.</p>

<p>When using the RSS generator tool, you will notice that the URLs end in <code>/xml</code>.  You must change
that ending to <code>/json</code>.</p>

<p>You will have a minimum of 50 items per chart.</p>

<h3 id="reading-the-remote-data">Reading the Remote Data</h3>
<p>In this assignment, we will be reading the data from the remote service synchronously,
which means that our application will block (be non-responsive) while the data is being
fetched.  The easiest way to do this is to use the <code>NSData</code> initializer <code>initWithContentsOfURL:</code>.</p>

<p>An example reading data from a remote location is as follows:</p>

<pre><code>NSURL  *url         = [[NSURL alloc] initWithString:@"http://www.apple.com"];
NSData *rawContents = [[NSData alloc] initWithContentsOfURL:url];
</code></pre>

<h3 id="parsing--json">Parsing  JSON</h3>
<p>You will be receiving data from the Apple RSS feed over HTTP in JSON format.
JSON is simply a structured way to represent data.  A good overview is
provided on <a href="http://en.wikipedia.org/wiki/JSON">Wikipedia</a>.  In essence, you
can think of JSON just like our plist file from the previous project.  The
intent is the same, but the format is different.  There will be arrays, inside
of dictionaries, inside of arrays, etc.</p>

<p>In order to parse JSON into native Objective-C objects, we will be using the
<a href="http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html">NSJSONSerialization Class</a>.  In particular, we will be interested in the <code>JSONObjectWithData:options:error:</code>
class method.</p>

<p>Assuming we have an <code>NSData</code> object which represents JSON data, and that we know
that the structure of the data has a dictionary as the root element, we could
parse the JSON data as follows:</p>

<pre><code>NSError      *error;
NSData       *rawJSON    = ...;
NSDictionary *parsedJSON = [NSJSONSerialization JSONObjectWithData:rawJSON
                                                           options:0
                                                             error:&amp;error];
if (error) {
    NSLog(@"JSON Parsing Error: %@", error);
}    
</code></pre>

<p>The error handling above is very minimal, but it demonstrates how  you can use
the error object.</p>

<h3 id="parsed-objects">Parsed Objects</h3>
<p>It is good practice when working with JSON data to parse the data into objects that
make sense in your application domain.  The alternative is to pass around <code>NSDictionary</code>s
of object attributes which can be a bit cumbersome.</p>

<p>For this assignment, you are required to parse the JSON data into an array of <code>ITunesMediaItem</code>s.
An <code>ITunesMediaItem</code> is just a simple class that knows how to set its properties based on an
<code>NSDictionary</code> of values.  My <code>ITunesMediaItem</code> header file is as follows:</p>

<pre><code>#import &lt;Foundation/Foundation.h&gt;

@interface ITunesMediaItem : NSObject

@property (nonatomic, readonly) NSString *title;
@property (nonatomic, readonly) NSString *category;
@property (nonatomic, readonly) NSString *artist;
@property (nonatomic, readonly) NSString *releaseDate;
@property (nonatomic, readonly) NSString *price;
@property (nonatomic, readonly) NSURL    *artworkURL;
@property (nonatomic, readonly) UIImage  *artworkImage;
@property (nonatomic, readonly) NSURL    *storeURL;
@property (nonatomic, readonly) int       rank;

- (id)initWithJSONAttributes:(NSDictionary *)jsonAttributes
                        rank:(int)rank;

@end
</code></pre>

<p>At a minimum, you must include the above fields.  I encourage you to access additional data
in your model and present it to the user.</p>

<p>The idea of this model is that the initializer will read the <code>NSDictionary</code> and pull out the
pieces of data that it is interested in.  For example, the artist can be accessed with
<code>jsonAttributes[@"im:artist"][@"label"]</code>.</p>

<p>One of the wonderful things about the data that we are using is that all of the different
media types have the same JSON representation.  This means that we only need one class to
represent the <code>ITunesMediaItem</code>s, not one for each type.</p>

<h3 id="the-fetcher">The Fetcher</h3>
<p>It is good practice to organize the fetching of the JSON data into a single class
that understands how to deliver the fetched results.  I created a class called
<code>ITunesFetcher</code> which does exactly this.  The header file for my class looks like this:</p>

<pre><code>#import &lt;Foundation/Foundation.h&gt;
#import "ITunesMediaItem.h"

@interface ITunesFetcher : NSObject

+ (NSArray *)topFreeApps;
+ (NSArray *)topAlbums;
+ (NSArray *)topPaidBooks;
+ (NSArray *)topMovies;
+ (NSArray *)topTVEpisodes;
+ (NSArray *)topITunesUCourses;

@end
</code></pre>

<p>The responsibility of this class is to fetch the RSS feed for the given chart, parse
the JSON data, create and return an array of <code>ITunesMediaItem</code> objects based on the parsed
data.</p>

<h2 id="the-controllers">The Controllers</h2>
<p>You will have a minimum of 6 different tabs in your application.  You will notice that
after you have 5 tabs, the <code>UITabBarController</code> automatically gives you a “more” tab.</p>

<p><img src="./project_3_files/tabs.png" alt="Many Tabs"></p>

<p>Each tab will have a <code>UINavigationController</code>.  At the first level of the navigation, a
<code>UITableViewController</code> will display a list of the items in the chart, ordered with the
most popular first.  The <code>UITableViewCell</code> in this must be custom.  At a minimum, it
will display the title, artist and rank of the <code>ITunesMediaItem</code>.</p>

<p>Some example top level lists are as follows:</p>

<p><img src="./project_3_files/list_1.png" alt="iOS Apps List"></p>

<p><img src="./project_3_files/list_2.png" alt="Movies List"></p>

<p>When the user taps on a row, the details for the selected media item will be presented.
This controller will also be a subclass of <code>UITableViewController</code> but it will display
a static number of rows as opposed to the dynamic nature of the list view.</p>

<p>Some examples of the detail views are as follows:</p>

<p><img src="./project_3_files/detail_1.png" alt="iOS App Detail"></p>

<p><img src="./project_3_files/detail_2.png" alt="iTunesU Detail"></p>

<p>You will notice in the second example that the artwork presented for the iTunesU course
is rather boring.  This is a “default” image that I provided when the item returned from
Apple does not have artwork associated with it.  You must be prepared for data that does
not have an image, and similarly present a default image instead.</p>

<p>In addition, be sure that your artwork image is not distorted when displayed.</p>

<h3 id="sharing">Sharing</h3>
<p>You must provide a button when presenting the details of an iTunes media item that allows
the user to share the item.  Tapping the button will show an array of services that
the user can use to share the item.</p>

<p>For example, the list of sharing options may look like this:</p>

<p><img src="./project_3_files/sharing_1.png" alt="Sharing Options"></p>

<p>At a minimum, you must share the artwork for the item, and the store URL.  As an example,
if the “Mail” method were chosen, the user would see the following:</p>

<p><img src="./project_3_files/sharing_2.png" alt="Share via Mail"></p>

<p>The good news, is that this sounds much more difficult than it is.  In order to share
information, and present the dialog, you must create a <code>UIActivityViewController</code> and
present it on the screen.  You will need to read about the
<a href="http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIActivityViewController_Class/Reference/Reference.html">UIActivityViewController</a> in order to determine how to create one.  Once you create one
you can present it on the screen as follows:</p>

<pre><code>UIActivityViewController *activityVC = ...;

[self presentViewController:activityVC
                   animated:YES
                 completion:nil];
</code></pre>

<p>The rest of the sharing is handled for you by iOS.</p>

<h3 id="launching-the-store">Launching the Store</h3>
<p>You must also provide a button in your details of an iTunes media item that will
redirect the user to the store so that he can purchase the item he is viewing.  In
the example application, the green button with the price on it is the button
with this behavior.</p>

<p>In order to do this, you will need to investigate the <a href="http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/UIApplication/openURL:">openURL: method</a> in the <a href="http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html">UIApplication class</a>.</p>

<p>Launching the store will take the user out of your application into a different
application.  For most media items, this might only work on the device.  You will know
that you are on the right track though if Safari is launched in the simulator.  Also,
in my testing, I found that a book media item shows a web page in Safari on the simulator.</p>

<h2 id="the-files">The Files</h2>
<p>While this project may seem complex, the reality is that there are a lot of files with
only a couple of lines in them.  The work is really in getting one chart working.  Once
you have one chart working successfully, the others will be able to reuse most of the
work done for the first one.  Be sure to use good object-oriented programming skills, and
try not to repeat yourself unnecessarily.  If there is common functionality between
charts, put it in a base class, and extend it.</p>

<p>The files in my project are as follows:</p>

<p><img src="./project_3_files/project_files.png" alt="Project Files"></p>

<p>In addition, I found the tab bar icons at <a href="http://www.glyphish.com/">http://www.glyphish.com</a> and my default
artwork image at <a href="http://www.iconfinder.com/">http://www.iconfinder.com</a>.  IconFinder is a nice resource as it
allows you to search for icons with a license filter applied.</p>

<h2 id="requirements">Requirements</h2>
<ol>
  <li>You will have at least 6 different charts in your app, each one being represented by
a different tab.</li>
  <li>Your charts will cover at least 6 different types of media (ex. iOS Apps, Music, Movies, etc)</li>
  <li>Your charts will have a minimum of 50 items per list.</li>
  <li>You will have an <code>ITunesMediaItem</code> model which will represent a single media item.</li>
  <li>You will have an <code>ITunesFetcher</code> class which will know how to fetch the chart
data and create an array of <code>ITunesMediaItem</code>s.</li>
  <li>Each tab will have a <code>UINavigationController</code> to navigate the chart.</li>
  <li>The first level of navigation will be a <code>UITableViewController</code> with dynamic
table rows that are of a custom class.</li>
  <li>The second level of navigation will be a <code>UITableViewContoller</code> with static
table rows.</li>
  <li>When presenting the details of a media item, if the item does not have artwork,
you must present a default image.</li>
  <li>You must allow the user to share the media item via all active sharing methods.</li>
  <li>When sharing, you must share the store URL and artwork at a minimum.</li>
  <li>You must provide a button that when tapped will take the user to the store
where he can purchase the item he was browsing.</li>
  <li>You will use good Object-Oriented Programming practice.</li>
  <li>You will adhere to MVC.</li>
  <li>Your program will compile and run without errors or warnings.</li>
  <li>Your program will not crash for any reason.</li>
  <li>Your code will be clean and easy to read.</li>
  <li>You will work individually.</li>
</ol>

<h2 id="bonus-features">Bonus Features</h2>
<p>You are welcomed and encouraged to add additional features to your program.
I will award extra credit for well implemented feature enhancements. If you
complete any of these suggested enhancements, or others, please make it 
obvious in your code that I should check for them.  Some ideas of ways
to earn extra credit are as follows:</p>

<ul>
  <li>Add tiny thumbnail images of the artwork in the list view.</li>
  <li>Improve the listing of items in the chart by supplying additional information
or presenting it differently.</li>
  <li>Offer an alternate view of the chart with a <code>UICollectionViewController</code>.
(NOTE: This is in addition to the <code>UITableViewController</code> that is required.)</li>
  <li>Present a <code>UIAlertView</code> if there is no network connection and the
application can not be run.</li>
  <li>Do all of the calls over the network on a background thread so that the 
main thread remains responsive.</li>
  <li>Support rotation, 4” iPhone, and/or iPad.</li>
  <li>Add an application icon.</li>
  <li>Anything else that you think enhances the product.</li>
</ul>

<h2 id="deliverables">Deliverables</h2>
<p>By the due date/time you are expected to have committed your working Xcode
project to your private github repository for CSCI 567 at the location 
<code>/project_3/ChartToppers</code>.</p>

    
  </div>



</body></html>